<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<body>

	<ui:composition template="#{layoutMB.template}">

		<ui:define name="title">
        Admin - Año Académico
      </ui:define>
		<ui:define name="body">
			<f:view>
				<h:form id="dtform">
					<p:panel id="panelAcademicYear"
						header="Agregar nuevo año académico" styleClass="box box-primary"
						style="font-size: 9pt;">

						<p:messages autoUpdate="true" showDetail="true" closable="true" />
						<p:growl id="grl" autoUpdate="false" showDetail="true" />

						<p:commandButton value="Nuevo año académico" icon="fa fa-plus"
							action="#{academicYearController.newAcademicYear()}"
							oncomplete="PF('newAcydialog').show()"
							update=":frmNewDialog:newpane" styleClass="btn-primary" />
						<br />
						<br />
						<p:dataTable id="dtt"
							value="#{academicYearController.academicYears}" var="item"
							editable="true" rowKey="#{item.acyear}" style="font-size: 9pt;">

							<p:column headerText="No. Sec"
								style="text-align: center; width: 30px;">                
				                #{item.acySec}
			              	</p:column>

							<p:column headerText="Año Académico" style="text-align: center;">
				                #{item.acyear}
			                </p:column>

							<p:column headerText="Abierto" style="text-align: center;">
								<p:selectBooleanButton id="value2" value="#{item.open}"
									onLabel="SI" offLabel="NO" onIcon="fa fa-check"
									offIcon="fa fa-close" style="width:60px" />
							</p:column>

							<p:column headerText="Editar"
								style="text-align: center; width:250px;">
								<p:commandButton value="Editar"
									action="#{academicYearController.editAcademicYear()}"
									immediate="true" oncomplete="PF('editAcydialog').show()"
									update=":frmEditDialog:editpane" icon="ui-icon-pencil"
									styleClass="btn-success">
									<f:setPropertyActionListener
										target="#{academicYearController.selectedRow}" value="#{item}" />
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</p:panel>
				</h:form>


				<h:form id="frmNewDialog">
					<p:dialog id="newdialog" widgetVar="newAcydialog" showEffect="clip"
						hideEffect="fold" resizable="false" header="Nuevo Año Académico">
						<p:panelGrid id="newpane" columns="2">

							<p:outputLabel value="Año académico :" />
							<p:inputText
								value="#{academicYearController.academicYear.acyear}" />

							<p:outputLabel value="Secuencia :" />
							<p:inputText
								value="#{academicYearController.academicYear.acySec}" />

							<p:outputLabel value="Estado (Abierto) :" />
							<p:selectBooleanCheckbox
								value="#{academicYearController.academicYear.open}" />
							<p:spacer />
							<p:commandButton value="Guardar"
								action="#{academicYearController.saveAcyear()}"
								styleClass="btn-info" update=":dtform:grl,:dtform:dtt"
								oncomplete="PF('newAcydialog').hide()" icon="ui-icon-disk" />
						</p:panelGrid>
					</p:dialog>
				</h:form>

				<h:form id="frmEditDialog">
					<p:dialog id="editdialog" widgetVar="editAcydialog"
						showEffect="clip" hideEffect="fold" resizable="false"
						header="Editar Año Académico">
						<p:panelGrid id="editpane" columns="2">

							<p:outputLabel value="Año académico :" />
							<p:inputText value="#{academicYearController.selectedRow.acyear}" />

							<p:outputLabel value="Secuencia :" />
							<p:inputText value="#{academicYearController.selectedRow.acySec}" />

							<p:outputLabel value="Estado (Abierto) :" />
							<p:selectBooleanCheckbox
								value="#{academicYearController.selectedRow.open}" />
							<p:spacer />
							<p:commandButton value="Actualizar"
								action="#{academicYearController.updateAcyear()}"
								styleClass="btn-info" update=":dtform:grl,:dtform:dtt"
								oncomplete="PF('editAcydialog').hide()" icon="ui-icon-disk" />
						</p:panelGrid>
					</p:dialog>
				</h:form>
			</f:view>

		</ui:define>

	</ui:composition>

</body>
</html>
